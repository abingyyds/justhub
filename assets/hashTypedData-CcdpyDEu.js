import{c8 as d,c6 as b,bP as x,bI as f,cm as c,cF as g,cH as D,bp as p,c9 as u}from"./index--rMBctAq.js";const P=`Ethereum Signed Message:
`;function l(n){const t=typeof n=="string"?d(n):typeof n.raw=="string"?n.raw:b(n.raw),e=d(`${P}${x(t)}`);return f([e,t])}function H(n,t){return c(l(n),t)}function M(n){const{domain:t={},message:e,primaryType:a}=n,s={EIP712Domain:g({domain:t}),...n.types};D({domain:t,message:e,primaryType:a,types:s});const r=["0x1901"];return t&&r.push(I({domain:t,types:s})),a!=="EIP712Domain"&&r.push(y({data:e,primaryType:a,types:s})),c(f(r))}function I({domain:n,types:t}){return y({data:n,primaryType:"EIP712Domain",types:t})}function y({data:n,primaryType:t,types:e}){const a=h({data:n,primaryType:t,types:e});return c(a)}function h({data:n,primaryType:t,types:e}){const a=[{type:"bytes32"}],s=[$({primaryType:t,types:e})];for(const r of e[t]){const[o,i]=T({types:e,name:r.name,type:r.type,value:n[r.name]});a.push(o),s.push(i)}return p(a,s)}function $({primaryType:n,types:t}){const e=u(w({primaryType:n,types:t}));return c(e)}function w({primaryType:n,types:t}){let e="";const a=m({primaryType:n,types:t});a.delete(n);const s=[n,...Array.from(a).sort()];for(const r of s)e+=`${r}(${t[r].map(({name:o,type:i})=>`${i} ${o}`).join(",")})`;return e}function m({primaryType:n,types:t},e=new Set){const s=n.match(/^\w*/u)?.[0];if(e.has(s)||t[s]===void 0)return e;e.add(s);for(const r of t[s])m({primaryType:r.type,types:t},e);return e}function T({types:n,name:t,type:e,value:a}){if(n[e]!==void 0)return[{type:"bytes32"},c(h({data:a,primaryType:e,types:n}))];if(e==="bytes")return[{type:"bytes32"},c(a)];if(e==="string")return[{type:"bytes32"},c(u(a))];if(e.lastIndexOf("]")===e.length-1){const s=e.slice(0,e.lastIndexOf("[")),r=a.map(o=>T({name:t,type:s,types:n,value:o}));return[{type:"bytes32"},c(p(r.map(([o])=>o),r.map(([,o])=>o)))]}return[{type:e},a]}export{I as a,y as b,M as c,H as h,P as p,l as t};
